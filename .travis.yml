sudo: false
language: python
python:
  - "2.7"
branches:
  only: 
    - master
env:
  global:
    - GH_REF: github.com/otamachan2/sphinxcontrib-ros-slide.git
    - secure: "Q+h6iWIKa8JfdJwPHvzTL36+5M0c0oygmZ2Hwl89zGtRBYYKbFiyRNzDZnqgWY4MRFrXiDLJLosqrJ5CNGbYAJI0Pci7ctSy/RaiZ7oC+0kDq03t6smne4rqzw1sc70EZ0I5/sf23qM/7/bc1OuB9Uxkevb2bcUEHezcr+2N/clS2q0WTqy+hut12+3fl+PVZ08vaIVphkIF3thiVFsKn4He260VGIeegb5Eeb4xFLI23j94z0H4BgJ0i7WIJwJ/T3z9kgIXD+C4luQawSZjvbrrsiTNR6j83OUGcJD/xEpi4iGMNc3eI5Itzxcwtzd4M1PSW11xqVibSYMK//ePU4xtPf8PjuSFzQVa3fCRNYDtP6DTjSjOicnc0gKhLTowXQa+YROwrCcveWIYqzYucpch86apImOrIuY36RyE0uWilC1V17c4QOtefmWj6os0RIi4NOa1/xiFETPmttI4qX/2CWqUozcGsdOHrkl0eXsm9DaVmXYCMIQx0cNa7QNxBiSdmzS6VjP5LEvSfaWGWwa6bkUePggyZPCPeCDyimb0SxFZD78TiXhXGaiKZ8q+yT79yesGm9y3EoC9/48lPSXUMcY0zQmhkf9Qi0Qb73zAiWR2g/auF8mjOJedqYz6JtfmNHtAgV7ouN/fCL1rW/SE0dJNgYdN6uY6Diqlq1E="
install: 
  - pip install -q -r requirements.txt
  - pip install git+https://github.com/otamachan2/sphinxcontrib-ros.git
script:
  - make
  - cd _build/slides
  - git init
  - git config user.name "Travis CI"
  - git config user.email "otamachan@gmail.com"
  - touch .nojekyll
  - git add .
  - git commit -m "Deploy to GitHub Pages"
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages > /dev/null 2>&1
sudo: false
language: python
python:
  - "2.7"
branches:
  only: 
    - master
env:
  global:
    - GH_REF: github.com/otamachan2/sphinxcontrib-ros-slide.git
    - secure: "acyz3MyzLKvN5d0avW0cQ8PlNdee2QkCR7cEZbxagBcBXheiPg0xXiXukRvnQdectm8MfjXyctSi8BGTj/sKyRs/x7JV+xxk/tmGrLLEX0oHA6bYs09WkSDrFXFcKP9EhyjuNpqsjCpHlUumRjEZs70/ae2qogmRCHB6dFtzxyyJAc9BFsl9OgcRH7DOjfyYBXmEIN/HPI30RmeNAlc93II81HeqEXgBEEN6c7kLVUiFX4kuR/oBtcyLzUhc2oT1seuwNAZYIPno0/7ms2DdsI8HmdJM9P+5w0OVueasGsW8APrlkZTDn8b29+CriCLg/q3zTm43pNvJcHKKRJx++oBuE65E+2LXKer6yEQ0jVFzsV5s8+2rg5mtxd+Rd4S6mE8Su5EBodULDpRGzG6VzGhyi+X9mRxrgMBpzqibmNpIcvE3SKXxJlaP0lJR+oqEwVxiS7KsOULXeJS9Bpu46S2Rf3Ngq2QKdF0A5qxi41m/09A8cHFEmX2FKvyZrN7GifSeQ48zdq3DYgaFud0CcQJXSTgYETg1+hpfyVu8Pxl/P3NvosMIDBT+prQWRZR0II12Q4Cw+1ZJ5XeWydOp/d1iLhppLhAMltxqnQwRAUeydT/3ItJf8tVhp0S4ixe6bUCxJnBWcWv5xPNI0LWXSafY00s7ZhaVoo6ndTre078="
install: 
  - pip install -q -r requirements.txt
  - pip install git+https://github.com/otamachan2/sphinxcontrib-ros.git
script:
  - make
  - cd _build/slides
  - git init
  - git config user.name "Travis CI"
  - git config user.email "otamachan@gmail.com"
  - touch .nojekyll
  - git add .
  - git commit -m "Deploy to GitHub Pages"
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages > /dev/null 2>&1